\section{Queuing Model (90 pts)\label{sec:7}}

    Note that for queuing models it is enough to use the experimental results from the previous sections. It is, however, possible that the numbers you need are not only the ones in the figures we asked for, but also the internal measurements that you have obtained through instrumentation of your middleware.

    \subsection{M/M/1\label{subsec:7_mm1}}
    Build queuing model based on Section 4 (write-only throughput) for each worker-thread configuration of the middleware. Use one M/M/1 queue to model your entire system. Motivate your choice of input parameters to the model. Explain for which experiments the predictions of the model match and for which they do not.
        \begin{table}
            \footnotesize{
                \begin{tabular}{lllrrrrrrrrrrrr}
                    \toprule
                    & & & & & \multicolumn{2}{c}{$\mathbb{E}[n_q]$} & \multicolumn{2}{c}{$\mathbb{E}[w]$} & \multicolumn{2}{c}{$\mathbb{E}[r]$} & \\
                    \cmidrule(lr){6-7}
                    \cmidrule(lr){8-9}
                    \cmidrule(lr){10-11}
                    Clients & WT & $\mu$        & $\lambda$ & $\rho$ & Act.   & Est.   & Act.  & Est.  & Act.  & Est.  & $\mathbb{E}[n]$ \\
                    \midrule
                    6       & 8  & 6750.87  & 2840.72   & 0.42   & 0.55   & 0.31   & 0.06  & 0.11  & 1.31  & 0.26  & 0.73    \\
                            & 16 & 8716.58  & 2841.52   & 0.33   & 0.55   & 0.16   & 0.06  & 0.06  & 1.32  & 0.17  & 0.48    \\
                            & 32 & 10385.53 & 2804.02   & 0.27   & 0.55   & 0.10   & 0.06  & 0.04  & 1.35  & 0.13  & 0.37    \\
                            & 64 & 11582.18 & 2795.48   & 0.24   & 0.54   & 0.08   & 0.07  & 0.03  & 1.38  & 0.11  & 0.32    \\
                    \addlinespace
                    12      & 8  & 6750.87  & 4967.16   & 0.74   & 0.71   & 2.05   & 0.08  & 0.41  & 1.62  & 0.56  & 2.78    \\
                            & 16 & 8716.58  & 4912.71   & 0.56   & 0.71   & 0.73   & 0.08  & 0.15  & 1.64  & 0.26  & 1.29    \\
                            & 32 & 10385.53 & 4916.28   & 0.47   & 0.70   & 0.43   & 0.08  & 0.09  & 1.64  & 0.18  & 0.90    \\
                            & 64 & 11582.18 & 4837.95   & 0.42   & 0.71   & 0.30   & 0.09  & 0.06  & 1.69  & 0.15  & 0.72    \\
                    \addlinespace
                    24      & 8  & 6750.87  & 5955.70   & 0.88   & 1.34   & 6.61   & 0.71  & 1.11  & 3.13  & 1.26  & 7.49    \\
                            & 16 & 8716.58  & 6152.89   & 0.71   & 1.27   & 1.69   & 0.16  & 0.28  & 3.00  & 0.39  & 2.40    \\
                            & 32 & 10385.53 & 6152.39   & 0.59   & 1.24   & 0.86   & 0.15  & 0.14  & 3.02  & 0.24  & 1.45    \\
                            & 64 & 11582.18 & 6065.53   & 0.52   & 1.27   & 0.58   & 0.15  & 0.09  & 3.06  & 0.18  & 1.10    \\
                    \addlinespace
                    48      & 8  & 6750.87  & 6680.05   & 0.99   & 10.97  & 93.34  & 3.82  & 13.97 & 6.26  & 14.12 & 94.33   \\
                            & 16 & 8716.58  & 8187.89   & 0.94   & 2.90   & 14.55  & 1.17  & 1.78  & 4.82  & 1.89  & 15.49   \\
                            & 32 & 10385.53 & 8378.57   & 0.81   & 2.52   & 3.37   & 0.30  & 0.40  & 4.66  & 0.50  & 4.17    \\
                            & 64 & 11582.18 & 8169.04   & 0.71   & 2.54   & 1.69   & 0.32  & 0.21  & 4.78  & 0.29  & 2.39    \\
                    \addlinespace
                    96      & 8  & 6750.87  & 6664.46   & 0.99   & 34.90  & 76.14  & 11.03 & 11.43 & 13.47 & 11.57 & 77.13   \\
                            & 16 & 8716.58  & 8615.87   & 0.99   & 23.51  & 84.56  & 6.28  & 9.81  & 10.05 & 9.93  & 85.55   \\
                            & 32 & 10385.53 & 10010.31  & 0.96   & 6.97   & 25.71  & 2.04  & 2.57  & 8.11  & 2.67  & 26.68   \\
                            & 64 & 11582.18 & 9934.78   & 0.86   & 5.23   & 5.17   & 0.72  & 0.52  & 7.88  & 0.61  & 6.03    \\
                    \addlinespace
                    192     & 8  & 6750.87  & 6690.19   & 0.99   & 82.90  & 109.27 & 25.35 & 16.33 & 27.79 & 16.48 & 110.26  \\
                            & 16 & 8716.58  & 8626.23   & 0.99   & 71.39  & 94.49  & 17.41 & 10.95 & 21.17 & 11.07 & 95.48   \\
                            & 32 & 10385.53 & 10327.67  & 0.99   & 50.35  & 177.48 & 10.70 & 17.18 & 16.95 & 17.28 & 178.47  \\
                            & 64 & 11582.18 & 11250.96  & 0.97   & 16.84  & 33.00  & 3.51  & 2.93  & 14.20 & 3.02  & 33.97   \\
                    \addlinespace
                    288     & 8  & 6750.87  & 6721.16   & 1.00   & 130.85 & 225.26 & 39.52 & 33.52 & 41.95 & 33.66 & 226.26  \\
                            & 16 & 8716.58  & 8681.76   & 1.00   & 119.31 & 248.28 & 28.35 & 28.60 & 32.09 & 28.71 & 249.28  \\
                            & 32 & 10385.53 & 10366.34  & 1.00   & 98.10  & 539.23 & 19.94 & 52.02 & 26.17 & 52.11 & 540.23  \\
                            & 64 & 11582.18 & 11468.23  & 0.99   & 56.99  & 99.65  & 10.73 & 8.69  & 21.87 & 8.78  & 100.64  \\
                    \bottomrule
                \end{tabular}
                \caption{MM1 calculations for given configurations of Experiment 4 using the formulae listed in
                         the book, Box 31.1. Numbers are rounded to two decimal places for presentation
                         purposes.\label{tab:7_mm1}}
            }
        \end{table}

        \subsection{M/M/m\label{subsec:7_mmm}}

        Build an M/M/m model based on Section 4, where each middleware worker thread is represented as one service.  Motivate your choice of input parameters to the model. Explain for which experiments the predictions of the model match and for which they do not.
        \begin{table}
            \begin{adjustwidth}{-1cm}{}
                \footnotesize{
                    \begin{tabular}{lllrrrrrrrrrrrr}
                        \toprule
                        & & & & & \multicolumn{2}{c}{$\mathbb{E}[n_q]$} & \multicolumn{2}{c}{$\mathbb{E}[w]$} & \multicolumn{2}{c}{$\mathbb{E}[r]$} & &  & & \\
                        \cmidrule(lr){6-7}
                        \cmidrule(lr){8-9}
                        \cmidrule(lr){10-11}
                        Clients & WT & $\mu$      & $\lambda$ & $\rho$ & Act.   & Est.   & Act.  & Est.  & Act.  & Est.  & $\mathbb{E}[n]$ & $\varrho$ & $p_0$ & $U$ \\
                        \midrule
                        6       & 8  & 421.93 & 2840.72   & 0.42   & 0.55   & 0.00   & 0.06  & 0.00  & 1.31  & 2.37  & 6.73            & 0.00      & 0.0   & 0.42 \\
                                & 16 & 272.39 & 2841.52   & 0.33   & 0.55   & 0.00   & 0.06  & 0.00  & 1.32  & 3.67  & 10.43           & 0.00      & 0.0   & 0.33 \\
                                & 32 & 162.27 & 2804.02   & 0.27   & 0.55   & 0.00   & 0.06  & 0.00  & 1.35  & 6.16  & 17.28           & 0.00      & 0.0   & 0.27 \\
                                & 64 & 90.49  & 2795.48   & 0.24   & 0.54   & 0.00   & 0.07  & 0.00  & 1.38  & 11.05 & 30.89           & 0.00      & 0.0   & 0.24 \\
                        \addlinespace
                        12      & 8  & 421.93 & 4967.16   & 0.74   & 0.71   & 0.50   & 0.08  & 0.10  & 1.62  & 2.47  & 12.28           & 0.18      & 0.0   & 0.74 \\
                                & 16 & 272.39 & 4912.71   & 0.56   & 0.71   & 0.00   & 0.08  & 0.00  & 1.64  & 3.67  & 18.04           & 0.00      & 0.0   & 0.56 \\
                                & 32 & 162.27 & 4916.28   & 0.47   & 0.70   & 0.00   & 0.08  & 0.00  & 1.64  & 6.16  & 30.30           & 0.00      & 0.0   & 0.47 \\
                                & 64 & 90.49  & 4837.95   & 0.42   & 0.71   & 0.00   & 0.09  & 0.00  & 1.69  & 11.05 & 53.47           & 0.00      & 0.0   & 0.42 \\
                        \addlinespace
                        24      & 8  & 421.93 & 5955.70   & 0.88   & 1.34   & 3.98   & 0.71  & 0.67  & 3.13  & 3.04  & 18.10           & 0.53      & 0.0   & 0.88 \\
                                & 16 & 272.39 & 6152.89   & 0.71   & 1.27   & 0.10   & 0.16  & 0.02  & 3.00  & 3.69  & 22.69           & 0.04      & 0.0   & 0.71 \\
                                & 32 & 162.27 & 6152.39   & 0.59   & 1.24   & 0.00   & 0.15  & 0.00  & 3.02  & 6.16  & 37.91           & 0.00      & 0.0   & 0.59 \\
                                & 64 & 90.49  & 6065.53   & 0.52   & 1.27   & 0.00   & 0.15  & 0.00  & 3.06  & 11.05 & 67.03           & 0.00      & 0.0   & 0.52 \\
                        \addlinespace
                        48      & 8  & 421.93 & 6680.05   & 0.99   & 10.97  & 89.74  & 3.82  & 13.43 & 6.26  & 15.80 & 105.57          & 0.95      & 0.0   & 0.99 \\
                                & 16 & 272.39 & 8187.89   & 0.94   & 2.90   & 9.91   & 1.17  & 1.21  & 4.82  & 4.88  & 39.97           & 0.64      & 0.0   & 0.94 \\
                                & 32 & 162.27 & 8378.57   & 0.81   & 2.52   & 0.27   & 0.30  & 0.03  & 4.66  & 6.19  & 51.90           & 0.06      & 0.0   & 0.81 \\
                                & 64 & 90.49  & 8169.04   & 0.71   & 2.54   & 0.00   & 0.32  & 0.00  & 4.78  & 11.05 & 90.28           & 0.00      & 0.0   & 0.71 \\
                        \addlinespace
                        96      & 8  & 421.93 & 6664.46   & 0.99   & 34.90  & 72.56  & 11.03 & 10.89 & 13.47 & 13.26 & 88.36           & 0.94      & 0.0   & 0.99 \\
                                & 16 & 272.39 & 8615.87   & 0.99   & 23.51  & 79.01  & 6.28  & 9.17  & 10.05 & 12.84 & 110.64          & 0.92      & 0.0   & 0.99 \\
                                & 32 & 162.27 & 10010.31  & 0.96   & 6.97   & 18.35  & 2.04  & 1.83  & 8.11  & 8.00  & 80.04           & 0.69      & 0.0   & 0.96 \\
                                & 64 & 90.49  & 9934.78   & 0.86   & 5.23   & 0.35   & 0.72  & 0.04  & 7.88  & 11.09 & 110.15          & 0.06      & 0.0   & 0.86 \\
                        \addlinespace
                        192     & 8  & 421.93 & 6690.19   & 0.99   & 82.90  & 105.65 & 25.35 & 15.79 & 27.79 & 18.16 & 121.51          & 0.96      & 0.0   & 0.99 \\
                                & 16 & 272.39 & 8626.23   & 0.99   & 71.39  & 88.91  & 17.41 & 10.31 & 21.17 & 13.98 & 120.58          & 0.93      & 0.0   & 0.99 \\
                                & 32 & 162.27 & 10327.67  & 0.99   & 50.35  & 168.99 & 10.70 & 16.36 & 16.95 & 22.53 & 232.63          & 0.95      & 0.0   & 0.99 \\
                                & 64 & 90.49  & 11250.96  & 0.97   & 16.84  & 22.23  & 3.51  & 1.98  & 14.20 & 13.03 & 146.57          & 0.65      & 0.0   & 0.97 \\
                        \addlinespace
                        288     & 8  & 421.93 & 6721.16   & 1.00   & 130.85 & 221.60 & 39.52 & 32.97 & 41.95 & 35.34 & 237.53          & 0.98      & 0.0   & 1.00 \\
                                & 16 & 272.39 & 8681.76   & 1.00   & 119.31 & 242.59 & 28.35 & 27.94 & 32.09 & 31.61 & 274.46          & 0.97      & 0.0   & 1.00 \\
                                & 32 & 162.27 & 10366.34  & 1.00   & 98.10  & 530.59 & 19.94 & 51.18 & 26.17 & 57.35 & 594.48          & 0.98      & 0.0   & 1.00 \\
                                & 64 & 90.49  & 11468.23  & 0.99   & 56.99  & 87.54  & 10.73 & 7.63  & 21.87 & 18.68 & 214.28          & 0.87      & 0.0   & 0.99 \\
                        \bottomrule
                    \end{tabular}
                    \caption{MMm calculations for given configurations of Experiment 4 using the formulae listed in
                             the book, Box 31.2. Numbers are rounded to two decimal places for presentation
                             purposes.\label{tab:7_mmm}}
                }
            \end{adjustwidth}
        \end{table}

        \subsection{Network of Queues\label{subsec:7_noc}}

    Based on Section 3, build a network of queues which simulates your system. Motivate the design of your network of queues and relate it wherever possible to a component of your system. Motivate your choice of input parameters for the different queues inside the network. Perform a detailed analysis of the utilization of each component and clearly state what the bottleneck of your system is. Explain for which experiments the predictions of the model match and for which they do not.
